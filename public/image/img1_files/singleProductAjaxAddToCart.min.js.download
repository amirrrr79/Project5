!function(d){XTSThemeModule.singleProductAjaxAddToCart=function(){"no"!==xts_settings.single_product_ajax_add_to_cart&&(XTSThemeModule.$body.on("submit","form.cart",function(t){var r,a=d(this),s=a.parents(".product");s.hasClass("product-type-external")||s.hasClass("product-type-zakeke")||void 0!==t.originalEvent&&d(t.originalEvent.submitter).hasClass("xts-buy-now-btn")||(t.preventDefault(),r=a.find(".single_add_to_cart_button"),t=a.serialize(),t+="&action=xts_single_product_ajax_add_to_cart",r.val()&&(t+="&add-to-cart="+r.val()),r.removeClass("added xts-not-added").addClass("loading"),d(document.body).trigger("adding_to_cart",[r,t]),d.ajax({url:xts_settings.ajaxurl,data:t,method:"POST",success:function(t){var a,e,o,n;t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===xts_settings.cart_redirect_after_add?window.location=xts_settings.action_after_add_to_cart_cart_url:(r.removeClass("loading"),a=t.fragments,e=t.cart_hash,a&&d.each(a,function(t){d(t).addClass("xts-updating")}),a&&d.each(a,function(t,a){d(t).replaceWith(a)}),s.hasClass("xts-product")&&t.notices_raw.error?(o=t.notices_raw.error,n="",d.each(o,function(){var t=this.notice;n+=(t=t.substring(t.indexOf("</a>"),t.lastIndexOf(""))+"<br>",(new DOMParser).parseFromString(t,"text/html").documentElement.textContent)}),alert(n),s.find(".add_to_cart_button").removeClass("loading")):0<t.notices.indexOf("error")?(d(".woocommerce-notices-wrapper").append(t.notices),r.addClass("xts-not-added")):("widget"===xts_settings.action_after_add_to_cart&&d.magnificPopup.close(),d(document.body).trigger("added_to_cart",[a,e,r]))))},error:function(){console.log("ajax adding to cart error")}}))}),XTSThemeModule.$body.on("click",".xts-sticky-atc .xts-buy-now-btn",function(){d(this).parents("form.cart").length||d("form.cart").find(".xts-buy-now-btn").trigger("click")}),XTSThemeModule.$body.on("click",".variations_form .xts-buy-now-btn",function(t){var a=d(this).siblings(".single_add_to_cart_button");"undefined"!=typeof wc_add_to_cart_variation_params&&a.hasClass("disabled")&&(t.preventDefault(),a.hasClass("wc-variation-is-unavailable")?alert(wc_add_to_cart_variation_params.i18n_unavailable_text):a.hasClass("wc-variation-selection-needed")&&alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text))}))},d(document).ready(function(){XTSThemeModule.singleProductAjaxAddToCart()})}(jQuery);